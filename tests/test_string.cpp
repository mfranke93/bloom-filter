#include <set>
#include <random>
#include <iostream>
#include <string>

#include "../lib/bloom_filter"

int main()
{
    constexpr size_t const num_hash_fns = 12;
    constexpr size_t const precision    = 12;
    
    // {{{ string set
    std::set<std::string> strings {
        "jubilant",
            "murre",
            "meditating",
            "unpublished",
            "abused",
            "coasters",
            "goodtime",
            "evidenced",
            "seventeens",
            "inadequacy",
            "ablation",
            "posh",
            "nudity",
            "illumine",
            "repenting",
            "pairs",
            "gatherers",
            "repercussions",
            "doers",
            "atrocity's",
            "restful",
            "interrogating",
            "papito",
            "drunken",
            "boats",
            "detection",
            "neuron",
            "vexing",
            "colorings",
            "entice",
            "crater",
            "cease",
            "organizer",
            "taster",
            "nicking",
            "panes",
            "autocollimate",
            "credential",
            "second",
            "disillusioned",
            "enjoys",
            "darrell",
            "bobbins",
            "finances",
            "mockernut",
            "bedazzles",
            "omits",
            "phrase",
            "rancho",
            "cameramen",
            "qwerasdf",
            "institute",
            "look",
            "acknowledges",
            "speller",
            "jeer",
            "torment",
            "mobile",
            "markov",
            "sends",
            "leeches",
            "slapper",
            "chases",
            "slaughtered",
            "gilt",
            "baltimor",
            "symbolically",
            "kidnapped",
            "excusing",
            "leniency",
            "legs",
            "heuristically",
            "invades",
            "coupon",
            "cousins",
            "welcomes",
            "excessively",
            "corsair",
            "cab",
            "atropos",
            "insuperable",
            "ok",
            "dora",
            "entrepreneurial",
            "nonlinear",
            "newman",
            "meaninglessness",
            "convalesce",
            "poole",
            "hangars",
            "biddy",
            "overthrow",
            "went",
            "mussel's",
            "fascist",
            "surges",
            "screw",
            "drudgery",
            "vanity",
            "accomplishment's",
            "riordan",
            "martian",
            "musings",
            "suffers",
            "unreachable",
            "rephrased",
            "bluegill",
            "distinction's",
            "dinnerware",
            "goes",
            "fourth",
            "plentiful",
            "unevaluated",
            "dissatisfied",
            "prolongs",
            "pietism",
            "amethystine",
            "spooned",
            "deceasing",
            "separations",
            "maw",
            "exploits",
            "indexable",
            "despoil",
            "underlies",
            "liquidations",
            "fantod",
            "thankless",
            "oftentimes",
            "liquifies",
            "southerners",
            "campaigner",
            "skyhawk",
            "visitors",
            "ozlq6qwm",
            "phobic",
            "experimentation's",
            "questionable",
            "swimsuit",
            "oppressor",
            "thecrow",
            "pythagoras",
            "buddy",
            "nanette",
            "miser",
            "sternness",
            "doubtfully",
            "descry",
            "superhumanly",
            "interruption's",
            "arrogate",
            "clays",
            "middlemen",
            "tractor",
            "irreducible",
            "majority's",
            "dining",
            "chasm",
            "hushing",
            "prevented",
            "bemoaned",
            "asset's",
            "quaker",
            "cocksure",
            "romped",
            "ahoy",
            "benedikt",
            "cod",
            "album",
            "korea",
            "lure",
            "spitz",
            "crucible",
            "pitt",
            "chaplaincy",
            "harding",
            "synod",
            "remoter",
            "raced",
            "exasperating",
            "credenza",
            "friedman",
            "elegiac",
            "softest",
            "obeyed",
            "exhortations",
            "uplift",
            "seem",
            "debuggers",
            "vance",
            "ignorant",
            "hashes",
            "truck",
            "variants",
            "lurching",
            "impending",
            "bogeymen",
            "craftiness",
            "unkindly",
            "repressions",
            "smooch",
            "departments",
            "induction's",
            "fiery",
            "distresses",
            "industrialists",
            "decomposed",
            "subsequence's",
            "northampton",
            "stu",
            "bin",
            "remembering",
            "levis",
            "sounded",
            "comically",
            "heavier",
            "spilled",
            "eradicates",
            "unseen",
            "brevet",
            "beckons",
            "tribune",
            "niceness",
            "adolescents",
            "inexpedient",
            "propel",
            "mimicking",
            "affirmed",
            "sit",
            "picketed",
            "bangui",
            "asiatic",
            "successive",
            "reviews",
            "shelves",
            "conferrers",
            "blanketers",
            "scoria",
            "scary",
            "exonerate",
            "balance",
            "bawling",
            "textile's",
            "congressman",
            "abdicate",
            "commando",
            "parabolic",
            "detergent",
            "sequentialized",
            "bootstrap",
            "recovers",
            "frightens",
            "preempts",
            "sufferings",
            "consistently",
            "curtsey",
            "bank",
            "tortured",
            "fibrously",
            "touching",
            "goldenly",
            "evinced",
            "univac",
            "romeo",
            "keying",
            "eight",
            "broglie",
            "occupying",
            "fears",
            "practical",
            "stepmother's",
            "snaked",
            "hinterland",
            "procuring",
            "tempers",
            "skylark",
            "coats",
            "sandwich",
            "delegates",
            "speak",
            "derange",
            "transceiver",
            "barry",
            "unsatisfactory",
            "improvising",
            "felled",
            "crude",
            "protest",
            "postcondition",
            "befoul",
            "dramatic",
            "footnote's",
            "masterfully",
            "uniting",
            "anguish",
            "sheer",
            "warfare",
            "los",
            "epitomizing",
            "gunnar",
            "cholera",
            "instructing",
            "imagery",
            "storks",
            "differential's",
            "electrolysis",
            "volatile",
            "preventable",
            "bacilli",
            "ames",
            "firenze",
            "laden",
            "informed",
            "sanguine",
            "enigma",
            "epitomizes",
            "streetcars",
            "circumventable",
            "sensitivity",
            "tailwind",
            "infinitesimal",
            "hovels",
            "texture",
            "chandler",
            "jude",
            "cleanup",
            "ramones",
            "about",
            "swingy",
            "lucille",
            "indictment",
            "conveyance",
            "bumped",
            "physical",
            "chucks",
            "breather",
            "ease",
            "mufasa",
            "mcclure",
            "coolies",
            "poseur",
            "constitute",
            "angeles",
            "prospected",
            "hardrock",
            "assonance",
            "extrema",
            "elite",
            "germicidal",
            "funnel",
            "cups",
            "rumbler",
            "jotted",
            "darren",
            "transvestite",
            "janitorial",
            "pestilential",
            "authenticity",
            "unfinished",
            "grinders",
            "penrose",
            "beguile",
            "disk's",
            "concealers",
            "cauliflower",
            "cloudburst",
            "endogenous",
            "thermoelectric",
            "blaring",
            "pl",
            "slipper",
            "loyal",
            "milkiness",
            "penthous",
            "foxglove",
            "seaports",
            "affidavit",
            "speeders",
            "cuxldv",
            "emigrates",
            "vocal",
            "proneness",
            "creasing",
            "unchangeable",
            "abundance",
            "prohibitively",
            "implant",
            "solvent's",
            "inkling's",
            "hovel's",
            "projections",
            "communicate",
            "christina",
            "regulatory",
            "fixating",
            "satchmo",
            "detent",
            "cornhole",
            "checking",
            "earwig",
            "norman",
            "technicality's",
            "daredevil",
            "discovered",
            "strokers",
            "drinking",
            "profoundest",
            "breath",
            "muscular",
            "hog",
            "rubout",
            "hopper's",
            "isopleth",
            "equalities",
            "distributor",
            "allele",
            "expansive",
            "cellist",
            "relieve",
            "citrus",
            "shotguns",
            "mounter",
            "belligerent's",
            "transients",
            "appreciates",
            "familiarizing",
            "breakthroughes",
            "comrade",
            "somehow",
            "pastiche",
            "downplay",
            "creaky",
            "pitman",
            "evaluable",
            "kresge",
            "europe",
            "kruse",
            "selects",
            "acquisitiveness",
            "illuminating",
            "precipitously",
            "shu",
            "vendible",
            "contoured",
            "crankier",
            "entreat",
            "aristocrat",
            "platoon",
            "hiding",
            "favorably",
            "posted",
            "humidifying",
            "sequoia",
            "rangy",
            "denotes",
            "steamship's",
            "titian",
            "adirondack",
            "yin",
            "restive",
            "bag",
            "ifni",
            "indentations",
            "bogged",
            "forfeited",
            "teamster",
            "intersperses",
            "lovebird",
            "battler",
            "sauerkraut",
            "anti",
            "curia",
            "loans",
            "inmates",
            "adversary",
            "communicated",
            "heavenward",
            "sneaker",
            "stamens",
            "gunshot",
            "poetic",
            "gutenberg",
            "greenwood",
            "ameslan",
            "hew",
            "flute",
            "univariate",
            "lurch",
            "perturbate",
            "mouthes",
            "birthplace",
            "trimmings",
            "douglass",
            "stormed",
            "zones",
            "ringing",
            "invertebrate's",
            "equilibrate",
            "responsibleness",
            "ascend",
            "coupler",
            "attractions",
            "diametric",
            "pig's",
            "stimulatory",
            "contentment",
            "unlikeness",
            "ash",
            "absented",
            "posseman",
            "tow",
            "concourse",
            "polled",
            "pregnant",
            "compliments",
            "pan's",
            "mammas",
            "prototypical",
            "econometrica",
            "directrix",
            "impenetrability",
            "outcast's",
            "brick",
            "creases",
            "briefly",
            "bedazzling",
            "fifteenth",
            "area",
            "horntail",
            "interviewers",
            "firemen",
            "greetings",
            "sizable",
            "rearrested",
            "traffics",
            "aspidistra",
            "syntax",
            "fueled",
            "swayed",
            "safari",
            "haploidy",
            "than",
            "outcomes",
            "creative",
            "supportable",
            "addressed",
            "geographer",
            "sleeve's",
            "stripper's",
            "umbilicus",
            "jamestown",
            "staphylococcus",
            "contravariant",
            "wolff",
            "spotter's",
            "silica",
            "mutating",
            "barbecued",
            "individualizes",
            "elastomer",
            "woodchuck",
            "caravans",
            "wart",
            "impossibility",
            "memorial",
            "placement",
            "string",
            "phrases",
            "decompress",
            "smolders",
            "exclusiveness",
            "waterproof",
            "transcends",
            "worldliness",
            "autocollimator",
            "hutchinson",
            "aspersion's",
            "parasite's",
            "brady",
            "flinty",
            "shamelessly",
            "enviousness",
            "carbohydrate",
            "covers",
            "wildcard",
            "aquifer",
            "clients",
            "garcia",
            "hemostats",
            "outputs",
            "uncommon",
            "bosco1",
            "it's",
            "velar",
            "shackles",
            "swag",
            "handout",
            "alterate",
            "periphery's",
            "lays",
            "chastity",
            "whirring",
            "harley",
            "subverted",
            "hem",
            "whitetail",
            "rippling",
            "classifiers",
            "careless",
            "fl",
            "punching",
            "excerpted",
            "repulsion",
            "protesting",
            "sharpen",
            "yosemite",
            "zilch",
            "gulled",
            "coronary",
            "reordered",
            "dikes",
            "mouthpiece",
            "carters",
            "sinner",
            "strobe",
            "red",
            "please",
            "siltation",
            "quadrille",
            "ceremony",
            "thrashed",
            "arm",
            "escalating",
            "amp",
            "statistical",
            "liege",
            "mcgowan",
            "constitutionality",
            "overturning",
            "frolics",
            "fur",
            "stolen",
            "gamut",
            "toggling",
            "pike",
            "conservatory",
            "chiquita",
            "distress",
            "brackets",
            "mariner",
            "iced",
            "kalmuk",
            "cdr",
            "climatically",
            "sightseer",
            "curler",
            "coldly",
            "banners",
            "medusa",
            "assuming",
            "acoustical",
            "phalanger",
            "unmanageably",
            "progressive",
            "courtroom",
            "bunkers",
            "dweller",
            "interrelated",
            "plover",
            "remonstrate",
            "orphic",
            "tsarina",
            "stardom",
            "scuffles",
            "stiffs",
            "gil",
            "immigrated",
            "level",
            "refiner",
            "indirects",
            "quite",
            "linens",
            "sliced",
            "reactive",
            "clevelan",
            "pariah",
            "ribbon",
            "durham",
            "greying",
            "gauss",
            "transcribing",
            "armers",
            "titer",
            "dialup",
            "topic's",
            "parallelograms",
            "rowley",
            "prostration",
            "hammers",
            "waters",
            "gaslight",
            "highwayman",
            "buzzes",
            "ice",
            "summaries",
            "referees",
            "repellent",
            "sharers",
            "coincidence",
            "smithereens",
            "deallocate",
            "tupelo",
            "contractors",
            "braggart",
            "baghdad",
            "catherine",
            "interconnected",
            "caviar",
            "greenman",
            "blacking",
            "yolk",
            "nonfunctional",
            "bled",
            "sincerely",
            "subcomputation",
            "adulterates",
            "completely",
            "calorie",
            "pointers",
            "dynamo",
            "implement",
            "artisan",
            "halter",
            "flock",
            "woos",
            "burgeoned",
            "inert",
            "indispose",
            "balletomane",
            "availabilities",
            "fount",
            "seward",
            "constable",
            "mackinac",
            "scaup",
            "colony",
            "sheep",
            "planing",
            "promulgation",
            "mate's",
            "stegosaurus",
            "lonelier",
            "launders",
            "sonora",
            "observant",
            "scalar's",
            "custodians",
            "pieced",
            "dynasty's",
            "perusers",
            "sow",
            "dowager",
            "ecology",
            "forgeries",
            "appleton",
            "outstretched",
            "puppeteer",
            "statisticians",
            "accidently",
            "constipate",
            "kong",
            "154ugeiu",
            "aggregations",
            "setter's",
            "clump",
            "thoroughfares",
            "synonymously",
            "peasanthood",
            "legume",
            "judicial",
            "guiltless",
            "buckeye",
            "o'neill",
            "cannery",
            "persuading",
            "clearing's",
            "metabolic",
            "captained",
            "agreed",
            "regression",
            "combinator",
            "carabao",
            "flashy",
            "electrolyte's",
            "aorta",
            "encapsulates",
            "thighs",
            "pumpkin",
            "disarms",
            "squeaking",
            "hanley",
            "byword's",
            "archaeologists",
            "glassware",
            "raffish",
            "outgrew",
            "knead",
            "bunions",
            "wordpass",
            "legislation",
            "saintly",
            "satiable",
            "singers",
            "stocking",
            "adenoma",
            "hat",
            "torn",
            "excusably",
            "allegory",
            "requisitioning",
            "roar",
            "predicament",
            "tarantula",
            "enumerable",
            "gel's",
            "comfort",
            "trajectories",
            "manic",
            "norms",
            "envelops",
            "bathers",
            "diners",
            "goff",
            "nary",
            "chinner",
            "cormorant",
            "downfall",
            "bald",
            "creditable",
            "matinee",
            "babe's",
            "visibly",
            "hallway",
            "drafting",
            "experimented",
            "nondeterminate",
            "canoe",
            "dream",
            "pallet",
            "acrobacy",
            "intake",
            "extrapolation",
            "innocents",
            "parimutuel",
            "jeans",
            "employers",
            "progressively",
            "esoteric",
            "astronaut's",
            "besides",
            "dust",
            "holystone",
            "mosses",
            "palladian",
            "rubens",
            "edwards",
            "simple",
            "meditative",
            "christine",
            "bandit's",
            "initialization's",
            "plumb",
            "eocene",
            "spiraled",
            "encrust",
            "honors",
            "neared",
            "bulging",
            "spectrophotometric",
            "redisplayed",
            "dupont",
            "weatherproof",
            "besting",
            "furze",
            "panzer",
            "sweetest",
            "excretion",
            "effaceable",
            "dinners",
            "overwhelming",
            "partnered",
            "realizable",
            "disburse",
            "turnips",
            "caterpillars",
            "floppily",
            "diagrammatic",
            "coagulate",
            "luther",
            "digesting",
            "grounder",
            "diagnoses",
            "discernibly",
            "results",
            "barstow",
            "it",
            "sonny",
            "requirement's",
            "postulated",
            "evangel",
            "advisedly",
            "basophilic",
            "temptress",
            "sill",
            "insurmountable",
            "mesa",
            "uneventful",
            "backpack",
            "wellington",
            "forewarnings",
            "uncontrolled",
            "heineken",
            "mourns",
            "organists",
            "grizzly",
            "bigguns",
            "copernicus",
            "completions",
            "hackney",
            "veers",
            "cutter's",
            "synchronously",
            "romper",
            "fabric's",
            "populated",
            "positing",
            "keystroke",
            "floweriness",
            "togo",
            "liquefaction",
            "antiquity",
            "attainers",
            "physician",
            "salutations",
            "spacing",
            "photolytic",
            "oncology",
            "bridgeheads",
            "locknut",
            "remarked",
            "liaison's",
            "willingly",
            "arisings",
            "inning",
            "subsidy's",
            "burrows",
            "reverently",
            "cotton",
            "discerned",
            "starling",
            "plight",
            "alphameric",
            "welcomed",
            "coverlets",
            "polynomials",
            "descends",
            "given",
            "bench",
            "bakers",
            "kilohertz",
            "conveniently",
            "ordeal",
            "urgings",
            "modularize",
            "theorizations",
            "francoise",
            "condensible",
            "darkness",
            "adoptive",
            "descendent",
            "boners",
            "agnew",
            "obscurities",
            "dilbert",
            "charlotte",
            "someone's",
            "alfred",
            "widely",
            "beograd",
            "courageously",
            "distortion",
            "anglo",
            "tote",
            "poultry",
            "unpacked",
            "talc",
            "process's",
            "perversion",
            "sidle",
            "clever"
    };
    // }}}

    bloom_filter<std::string, num_hash_fns, precision> filter;
    for (auto& str : strings)
    {
        filter.add(str);
    }

    // check true positives
    for (auto& str : strings)
    {
        if (not filter.test(str))
        {
            std::cerr << "Tested for membership of value \"" << str << "\" and got false negative!\n";
            return 1;
        }
    }
}

// vim: foldmethod=marker
